(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{hv:()=>L,kv:()=>D,Vg:()=>k,wq:()=>h});class t{constructor(e,t="",n=null){this.name=e,this.dueDate=n,this.description=t}setName(e){this.name=e}getName(){return this.name}setDescription(e){this.description=e}getDescription(){return this.description}setDate(e){this.dueDate=e}getDate(){return this.dueDate}getDateFormatted(){if(!this.dueDate||"No date"===this.dueDate)return"No date";const e=this.dueDate.split("-");return 3!==e.length?"Invalid date format":`${e[0]}/${e[1].padStart(2,"0")}/${e[2].padStart(2,"0")}`}}const n=document.querySelector(".addTask"),a=document.getElementById("addTaskModal"),o=document.getElementById("closeModal"),s=document.getElementById("addTaskForm");function c(){!function(){const e=D.map((e=>({name:e.getName(),description:e.getDescription(),dueDate:e.getDate()})));localStorage.setItem("myProjects",JSON.stringify(e))}()}function i(){document.getElementById("project-name").innerText="Inbox",h.innerHTML="",D.forEach((e=>{const t=d(e,D);h.appendChild(t)}))}function d(e,t){const n=document.createElement("div");return n.classList.add("task","task-card"),n.innerHTML=`\n      <h2>${e.getName()}</h2>\n      <p>Description: ${e.getDescription()}</p>\n      <p>Due Date: ${e.getDateFormatted()}</p>\n      <button class="remove-btn"></button>\n    `,n.querySelector(".remove-btn").addEventListener("click",(()=>function(e,t){t===D?D=D.filter((t=>t!==e)):t.removeTask(e.getName()),L?E(L):i(),c()}(e,t))),n}document.addEventListener("DOMContentLoaded",(function(){!function(){const e=localStorage.getItem("myProjects"),n=JSON.parse(e);D=Array.isArray(n)?n.map((e=>new t(e.name,e.description,e.dueDate))):[]}(),i()})),window.addEventListener("beforeunload",(function(){c()})),document.querySelector(".this-week").addEventListener("click",(function(){!function(){document.getElementById("project-name").innerText="This Week",h.innerHTML="";const e=new Date,t=new Date(e);t.setDate(e.getDate()-e.getDay());const n=new Date(e);n.setDate(e.getDate()+(6-e.getDay())),D.forEach((e=>{const a=new Date(e.getDate());if(a>=t&&a<=n){const t=d(e);h.appendChild(t)}}))}(),L=null})),document.querySelector(".Today").addEventListener("click",(function(){!function(){document.getElementById("project-name").innerText="Today",h.innerHTML="";const e=new Date,t=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;D.forEach((e=>{if(e.getDate()===t){const t=d(e);h.appendChild(t)}}))}(),L=null})),document.querySelector(".inbox").addEventListener("click",(function(){i(),L=null})),document.addEventListener("DOMContentLoaded",(function(){i()})),n.addEventListener("click",(function(){a.classList.add("visible"),a.style.display="block"})),o.addEventListener("click",(function(){a.style.display="none"})),window.addEventListener("click",(function(e){e.target===a&&(a.classList.remove("visible"),a.style.display="none")})),s.addEventListener("submit",(function(e){e.preventDefault();const n=document.getElementById("taskName").value,o=document.getElementById("taskDescription").value,d=document.getElementById("taskDueDate").value,r=new t(n,o,d);var l;L?(L.addTask(r),E(L)):(l=r,D.push(l),c(),i()),L||(c(),i()),a.style.display="none",s.reset()}));class r{constructor(e){this.name=e,this.tasks=[]}addTask(e){this.tasks.push(e)}getTasks(){return this.tasks}removeTask(e){this.tasks=this.tasks.filter((t=>t.getName()!==e))}}function l(e){E(e)}const u=document.querySelector(".addProject"),m=document.getElementById("addProjectModal"),p=document.getElementById("closeProjectModal"),g=document.getElementById("addProjectForm");function y(){const e=k.map((e=>({name:e.name,tasks:e.getTasks()})));localStorage.setItem("newProjects",JSON.stringify(e))}function f(){y()}function v(){const e=document.querySelector(".newProjects");e.innerHTML="",k.forEach((t=>{const n=document.createElement("div");n.classList.add("project-tab"),e.appendChild(n);const a=document.createElement("span");a.textContent=t.name,n.appendChild(a);const o=document.createElement("button");o.innerHTML="&#10006;",o.classList.add("remove-project-btn"),o.style.display="none",n.appendChild(o),n.addEventListener("mouseover",(()=>{o.style.display="inline-block"})),n.addEventListener("mouseout",(()=>{o.style.display="none"})),n.addEventListener("click",(()=>{L=t,l(t)})),o.addEventListener("click",(e=>{e.stopPropagation(),function(e){k=k.filter((t=>t!==e)),L===e&&(L=null),v(),L?E(L):i(),f()}(t)}))}))}function E(e){document.getElementById("project-name").innerText=e.name,h.innerHTML="",e.getTasks().forEach((t=>{const n=d(t,e);h.appendChild(n)}))}document.addEventListener("DOMContentLoaded",(function(){!function(){const e=localStorage.getItem("newProjects"),n=JSON.parse(e);k=Array.isArray(n)?n.map((e=>{const n=new r(e.name);return n.tasks=e.tasks.map((e=>new t(e.name,e.description,e.dueDate))),n})):[]}(),v(),L?l(L):i()})),window.addEventListener("beforeunload",(function(){y()})),u.addEventListener("click",(function(){m.classList.add("visible")})),p.addEventListener("click",(function(){m.classList.remove("visible"),g.reset()})),g.addEventListener("submit",(function(e){e.preventDefault();const t=document.getElementById("newProjectName").value,n=new r(t);k.push(n),v(),m.classList.remove("visible"),g.reset(),f()}));const h=document.querySelector(".task-container");let D=[],k=[],L=null;const b=document.getElementById("collapse-btn"),T=document.querySelector(".content");let w=!0;b.addEventListener("click",(function(){w?(T.style.maxHeight=T.scrollHeight+"px",w=!1):(T.style.maxHeight=0,w=!0)}))})();